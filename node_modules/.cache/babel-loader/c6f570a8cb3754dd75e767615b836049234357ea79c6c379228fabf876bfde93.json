{"ast":null,"code":"import _objectSpread from\"/Users/nourelkilany/Desktop/year 4 /java/myy/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useRef,useLayoutEffect,useState}from'react';import{motion,useScroll,useSpring,useTransform,useMotionValue,useVelocity,useAnimationFrame}from'motion/react';import'./VelocityText.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function useElementWidth(ref){const[width,setWidth]=useState(0);useLayoutEffect(()=>{function updateWidth(){if(ref.current){setWidth(ref.current.offsetWidth);}}updateWidth();window.addEventListener('resize',updateWidth);return()=>window.removeEventListener('resize',updateWidth);},[ref]);return width;}export const ScrollVelocity=_ref=>{let{scrollContainerRef,texts=[],velocity=100,className='',damping=50,stiffness=400,numCopies=6,velocityMapping={input:[0,1000],output:[0,5]},parallaxClassName='parallax',scrollerClassName='scroller',parallaxStyle,scrollerStyle}=_ref;function VelocityText(_ref2){let{children,baseVelocity=velocity,scrollContainerRef,className='',damping,stiffness,numCopies,velocityMapping,parallaxClassName,scrollerClassName,parallaxStyle,scrollerStyle}=_ref2;const baseX=useMotionValue(0);const scrollOptions=scrollContainerRef?{container:scrollContainerRef}:{};const{scrollY}=useScroll(scrollOptions);const scrollVelocity=useVelocity(scrollY);const smoothVelocity=useSpring(scrollVelocity,{damping:damping!==null&&damping!==void 0?damping:50,stiffness:stiffness!==null&&stiffness!==void 0?stiffness:400});const velocityFactor=useTransform(smoothVelocity,(velocityMapping===null||velocityMapping===void 0?void 0:velocityMapping.input)||[0,1000],(velocityMapping===null||velocityMapping===void 0?void 0:velocityMapping.output)||[0,5],{clamp:false});const copyRef=useRef(null);const copyWidth=useElementWidth(copyRef);function wrap(min,max,v){const range=max-min;const mod=((v-min)%range+range)%range;return mod+min;}const x=useTransform(baseX,v=>{if(copyWidth===0)return'0px';return\"\".concat(wrap(-copyWidth,0,v),\"px\");});const directionFactor=useRef(1);useAnimationFrame((t,delta)=>{let moveBy=directionFactor.current*baseVelocity*(delta/1000);if(velocityFactor.get()<0){directionFactor.current=-1;}else if(velocityFactor.get()>0){directionFactor.current=1;}moveBy+=directionFactor.current*moveBy*velocityFactor.get();baseX.set(baseX.get()+moveBy);});const spans=[];for(let i=0;i<numCopies;i++){spans.push(/*#__PURE__*/_jsx(\"span\",{className:className,ref:i===0?copyRef:null,children:children},i));}return/*#__PURE__*/_jsx(\"div\",{className:parallaxClassName,style:parallaxStyle,children:/*#__PURE__*/_jsx(motion.div,{className:scrollerClassName,style:_objectSpread({x},scrollerStyle),children:spans})});}return/*#__PURE__*/_jsx(\"section\",{children:texts.map((text,index)=>/*#__PURE__*/_jsxs(VelocityText,{className:className,baseVelocity:index%2!==0?-velocity:velocity,scrollContainerRef:scrollContainerRef,damping:damping,stiffness:stiffness,numCopies:numCopies,velocityMapping:velocityMapping,parallaxClassName:parallaxClassName,scrollerClassName:scrollerClassName,parallaxStyle:parallaxStyle,scrollerStyle:scrollerStyle,children:[text,\"\\xA0\"]},index))});};export default ScrollVelocity;","map":{"version":3,"names":["useRef","useLayoutEffect","useState","motion","useScroll","useSpring","useTransform","useMotionValue","useVelocity","useAnimationFrame","jsx","_jsx","jsxs","_jsxs","useElementWidth","ref","width","setWidth","updateWidth","current","offsetWidth","window","addEventListener","removeEventListener","ScrollVelocity","_ref","scrollContainerRef","texts","velocity","className","damping","stiffness","numCopies","velocityMapping","input","output","parallaxClassName","scrollerClassName","parallaxStyle","scrollerStyle","VelocityText","_ref2","children","baseVelocity","baseX","scrollOptions","container","scrollY","scrollVelocity","smoothVelocity","velocityFactor","clamp","copyRef","copyWidth","wrap","min","max","v","range","mod","x","concat","directionFactor","t","delta","moveBy","get","set","spans","i","push","style","div","_objectSpread","map","text","index"],"sources":["/Users/nourelkilany/Desktop/year 4 /java/myy/src/animation/VelocityText.jsx"],"sourcesContent":["import { useRef, useLayoutEffect, useState } from 'react';\nimport {\n  motion,\n  useScroll,\n  useSpring,\n  useTransform,\n  useMotionValue,\n  useVelocity,\n  useAnimationFrame\n} from 'motion/react';\nimport './VelocityText.css';\n\nfunction useElementWidth(ref) {\n  const [width, setWidth] = useState(0);\n\n  useLayoutEffect(() => {\n    function updateWidth() {\n      if (ref.current) {\n        setWidth(ref.current.offsetWidth);\n      }\n    }\n    updateWidth();\n    window.addEventListener('resize', updateWidth);\n    return () => window.removeEventListener('resize', updateWidth);\n  }, [ref]);\n\n  return width;\n}\n\nexport const ScrollVelocity = ({\n  scrollContainerRef,\n  texts = [],\n  velocity = 100,\n  className = '',\n  damping = 50,\n  stiffness = 400,\n  numCopies = 6,\n  velocityMapping = { input: [0, 1000], output: [0, 5] },\n  parallaxClassName = 'parallax',\n  scrollerClassName = 'scroller',\n  parallaxStyle,\n  scrollerStyle\n}) => {\n  function VelocityText({\n    children,\n    baseVelocity = velocity,\n    scrollContainerRef,\n    className = '',\n    damping,\n    stiffness,\n    numCopies,\n    velocityMapping,\n    parallaxClassName,\n    scrollerClassName,\n    parallaxStyle,\n    scrollerStyle\n  }) {\n    const baseX = useMotionValue(0);\n    const scrollOptions = scrollContainerRef ? { container: scrollContainerRef } : {};\n    const { scrollY } = useScroll(scrollOptions);\n    const scrollVelocity = useVelocity(scrollY);\n    const smoothVelocity = useSpring(scrollVelocity, {\n      damping: damping ?? 50,\n      stiffness: stiffness ?? 400\n    });\n    const velocityFactor = useTransform(\n      smoothVelocity,\n      velocityMapping?.input || [0, 1000],\n      velocityMapping?.output || [0, 5],\n      { clamp: false }\n    );\n\n    const copyRef = useRef(null);\n    const copyWidth = useElementWidth(copyRef);\n\n    function wrap(min, max, v) {\n      const range = max - min;\n      const mod = (((v - min) % range) + range) % range;\n      return mod + min;\n    }\n\n    const x = useTransform(baseX, v => {\n      if (copyWidth === 0) return '0px';\n      return `${wrap(-copyWidth, 0, v)}px`;\n    });\n\n    const directionFactor = useRef(1);\n    useAnimationFrame((t, delta) => {\n      let moveBy = directionFactor.current * baseVelocity * (delta / 1000);\n\n      if (velocityFactor.get() < 0) {\n        directionFactor.current = -1;\n      } else if (velocityFactor.get() > 0) {\n        directionFactor.current = 1;\n      }\n\n      moveBy += directionFactor.current * moveBy * velocityFactor.get();\n      baseX.set(baseX.get() + moveBy);\n    });\n\n    const spans = [];\n    for (let i = 0; i < numCopies; i++) {\n      spans.push(\n        <span className={className} key={i} ref={i === 0 ? copyRef : null}>\n          {children}\n        </span>\n      );\n    }\n\n    return (\n      <div className={parallaxClassName} style={parallaxStyle}>\n        <motion.div className={scrollerClassName} style={{ x, ...scrollerStyle }}>\n          {spans}\n        </motion.div>\n      </div>\n    );\n  }\n\n  return (\n    <section>\n      {texts.map((text, index) => (\n        <VelocityText\n          key={index}\n          className={className}\n          baseVelocity={index % 2 !== 0 ? -velocity : velocity}\n          scrollContainerRef={scrollContainerRef}\n          damping={damping}\n          stiffness={stiffness}\n          numCopies={numCopies}\n          velocityMapping={velocityMapping}\n          parallaxClassName={parallaxClassName}\n          scrollerClassName={scrollerClassName}\n          parallaxStyle={parallaxStyle}\n          scrollerStyle={scrollerStyle}\n        >\n          {text}&nbsp;\n        </VelocityText>\n      ))}\n    </section>\n  );\n};\n\nexport default ScrollVelocity;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}