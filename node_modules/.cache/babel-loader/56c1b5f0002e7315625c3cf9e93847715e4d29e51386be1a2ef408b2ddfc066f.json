{"ast":null,"code":"import{useRef,useEffect,useState}from'react';import{gsap}from'gsap';import'./Pixel.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PixelTransition(_ref){let{firstContent,secondContent,gridSize=7,pixelColor='currentColor',animationStepDuration=0.3,once=false,aspectRatio='100%',className='',style={}}=_ref;const containerRef=useRef(null);const pixelGridRef=useRef(null);const activeRef=useRef(null);const delayedCallRef=useRef(null);const[isActive,setIsActive]=useState(false);const isTouchDevice='ontouchstart'in window||navigator.maxTouchPoints>0||window.matchMedia('(pointer: coarse)').matches;useEffect(()=>{const pixelGridEl=pixelGridRef.current;if(!pixelGridEl)return;pixelGridEl.innerHTML='';for(let row=0;row<gridSize;row++){for(let col=0;col<gridSize;col++){const pixel=document.createElement('div');pixel.classList.add('pixelated-image-card__pixel');pixel.style.backgroundColor=pixelColor;const size=100/gridSize;pixel.style.width=\"\".concat(size,\"%\");pixel.style.height=\"\".concat(size,\"%\");pixel.style.left=\"\".concat(col*size,\"%\");pixel.style.top=\"\".concat(row*size,\"%\");pixelGridEl.appendChild(pixel);}}},[gridSize,pixelColor]);const animatePixels=activate=>{setIsActive(activate);const pixelGridEl=pixelGridRef.current;const activeEl=activeRef.current;if(!pixelGridEl||!activeEl)return;const pixels=pixelGridEl.querySelectorAll('.pixelated-image-card__pixel');if(!pixels.length)return;gsap.killTweensOf(pixels);if(delayedCallRef.current){delayedCallRef.current.kill();}gsap.set(pixels,{display:'none'});const totalPixels=pixels.length;const staggerDuration=animationStepDuration/totalPixels;gsap.to(pixels,{display:'block',duration:0,stagger:{each:staggerDuration,from:'random'}});delayedCallRef.current=gsap.delayedCall(animationStepDuration,()=>{activeEl.style.display=activate?'block':'none';activeEl.style.pointerEvents=activate?'none':'';});gsap.to(pixels,{display:'none',duration:0,delay:animationStepDuration,stagger:{each:staggerDuration,from:'random'}});};const handleEnter=()=>{if(!isActive)animatePixels(true);};const handleLeave=()=>{if(isActive&&!once)animatePixels(false);};const handleClick=()=>{if(!isActive)animatePixels(true);else if(isActive&&!once)animatePixels(false);};return/*#__PURE__*/_jsxs(\"div\",{ref:containerRef,className:\"pixelated-image-card \".concat(className),style:style,onMouseEnter:!isTouchDevice?handleEnter:undefined,onMouseLeave:!isTouchDevice?handleLeave:undefined,onClick:isTouchDevice?handleClick:undefined,onFocus:!isTouchDevice?handleEnter:undefined,onBlur:!isTouchDevice?handleLeave:undefined,tabIndex:0,children:[/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:aspectRatio}}),/*#__PURE__*/_jsx(\"div\",{className:\"pixelated-image-card__default\",\"aria-hidden\":isActive,children:firstContent}),/*#__PURE__*/_jsx(\"div\",{className:\"pixelated-image-card__active\",ref:activeRef,\"aria-hidden\":!isActive,children:secondContent}),/*#__PURE__*/_jsx(\"div\",{className:\"pixelated-image-card__pixels\",ref:pixelGridRef})]});}export default PixelTransition;","map":{"version":3,"names":["useRef","useEffect","useState","gsap","jsx","_jsx","jsxs","_jsxs","PixelTransition","_ref","firstContent","secondContent","gridSize","pixelColor","animationStepDuration","once","aspectRatio","className","style","containerRef","pixelGridRef","activeRef","delayedCallRef","isActive","setIsActive","isTouchDevice","window","navigator","maxTouchPoints","matchMedia","matches","pixelGridEl","current","innerHTML","row","col","pixel","document","createElement","classList","add","backgroundColor","size","width","concat","height","left","top","appendChild","animatePixels","activate","activeEl","pixels","querySelectorAll","length","killTweensOf","kill","set","display","totalPixels","staggerDuration","to","duration","stagger","each","from","delayedCall","pointerEvents","delay","handleEnter","handleLeave","handleClick","ref","onMouseEnter","undefined","onMouseLeave","onClick","onFocus","onBlur","tabIndex","children","paddingTop"],"sources":["/Users/nourelkilany/Desktop/year 4 /java/myy/src/animation/PixelTransition.jsx"],"sourcesContent":["import { useRef, useEffect, useState } from 'react';\nimport { gsap } from 'gsap';\nimport './Pixel.css';\n\nfunction PixelTransition({\n  firstContent,\n  secondContent,\n  gridSize = 7,\n  pixelColor = 'currentColor',\n  animationStepDuration = 0.3,\n  once = false,\n  aspectRatio = '100%',\n  className = '',\n  style = {}\n}) {\n  const containerRef = useRef(null);\n  const pixelGridRef = useRef(null);\n  const activeRef = useRef(null);\n  const delayedCallRef = useRef(null);\n\n  const [isActive, setIsActive] = useState(false);\n\n  const isTouchDevice =\n    'ontouchstart' in window || navigator.maxTouchPoints > 0 || window.matchMedia('(pointer: coarse)').matches;\n\n  useEffect(() => {\n    const pixelGridEl = pixelGridRef.current;\n    if (!pixelGridEl) return;\n\n    pixelGridEl.innerHTML = '';\n\n    for (let row = 0; row < gridSize; row++) {\n      for (let col = 0; col < gridSize; col++) {\n        const pixel = document.createElement('div');\n        pixel.classList.add('pixelated-image-card__pixel');\n        pixel.style.backgroundColor = pixelColor;\n\n        const size = 100 / gridSize;\n        pixel.style.width = `${size}%`;\n        pixel.style.height = `${size}%`;\n        pixel.style.left = `${col * size}%`;\n        pixel.style.top = `${row * size}%`;\n        pixelGridEl.appendChild(pixel);\n      }\n    }\n  }, [gridSize, pixelColor]);\n\n  const animatePixels = activate => {\n    setIsActive(activate);\n\n    const pixelGridEl = pixelGridRef.current;\n    const activeEl = activeRef.current;\n    if (!pixelGridEl || !activeEl) return;\n\n    const pixels = pixelGridEl.querySelectorAll('.pixelated-image-card__pixel');\n    if (!pixels.length) return;\n\n    gsap.killTweensOf(pixels);\n    if (delayedCallRef.current) {\n      delayedCallRef.current.kill();\n    }\n\n    gsap.set(pixels, { display: 'none' });\n\n    const totalPixels = pixels.length;\n    const staggerDuration = animationStepDuration / totalPixels;\n\n    gsap.to(pixels, {\n      display: 'block',\n      duration: 0,\n      stagger: {\n        each: staggerDuration,\n        from: 'random'\n      }\n    });\n\n    delayedCallRef.current = gsap.delayedCall(animationStepDuration, () => {\n      activeEl.style.display = activate ? 'block' : 'none';\n      activeEl.style.pointerEvents = activate ? 'none' : '';\n    });\n\n    gsap.to(pixels, {\n      display: 'none',\n      duration: 0,\n      delay: animationStepDuration,\n      stagger: {\n        each: staggerDuration,\n        from: 'random'\n      }\n    });\n  };\n\n  const handleEnter = () => {\n    if (!isActive) animatePixels(true);\n  };\n  const handleLeave = () => {\n    if (isActive && !once) animatePixels(false);\n  };\n  const handleClick = () => {\n    if (!isActive) animatePixels(true);\n    else if (isActive && !once) animatePixels(false);\n  };\n\n  return (\n    <div\n      ref={containerRef}\n      className={`pixelated-image-card ${className}`}\n      style={style}\n      onMouseEnter={!isTouchDevice ? handleEnter : undefined}\n      onMouseLeave={!isTouchDevice ? handleLeave : undefined}\n      onClick={isTouchDevice ? handleClick : undefined}\n      onFocus={!isTouchDevice ? handleEnter : undefined}\n      onBlur={!isTouchDevice ? handleLeave : undefined}\n      tabIndex={0}\n    >\n      <div style={{ paddingTop: aspectRatio }} />\n      <div className=\"pixelated-image-card__default\" aria-hidden={isActive}>\n        {firstContent}\n      </div>\n      <div className=\"pixelated-image-card__active\" ref={activeRef} aria-hidden={!isActive}>\n        {secondContent}\n      </div>\n      <div className=\"pixelated-image-card__pixels\" ref={pixelGridRef} />\n    </div>\n  );\n}\n\nexport default PixelTransition;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}